{% extends 'Template.html.twig' %}
    {% block title %}Liste Demandes  {% endblock %}


{% block body %}
    <link href="{{ asset('tableFilter/assets/css/bootstrap.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('tableFilter/assets/css/bootstrap-override.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('tableFilter/assets/css/bootstrap-table.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('tableFilter/src/bootstrap-table-filter.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('comingsoon_05/vendor/select2/select2.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('tableFilter/assets/css/jquery-ui-1.10.3.css') }}" rel="stylesheet" type="text/css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

    <style>
        table tr td {
            text-align: center !important;
        }
        table tr th {
            text-align: center !important;
        }


        .modal-manifest  {

            width: 906px;
        }


        .invoice-box {
            max-width: 800px;
            margin: auto;
            padding: 30px;
            font-size: 16px;
            line-height: 24px;
            color: black;
        }

        .invoice-box table {
            width: 100%;
            line-height: inherit;
            text-align: left;
        }

        .invoice-box table td {
            padding: 5px;
            vertical-align: top;
        }

        .invoice-box table tr td:nth-child(2) {
            text-align: right;
        }

        .invoice-box table tr.top table td {
            padding-bottom: 20px;
        }

        .invoice-box table tr.top table td.title {
            font-size: 45px;
            line-height: 45px;
            color: #333;
        }

        .invoice-box table tr.information table td {
            padding-bottom: 40px;
        }

        .invoice-box table tr.heading td {
            background: #eee;
            border-bottom: 1px solid #ddd;
            font-weight: bold;
        }

        .invoice-box table tr.details td {
            padding-bottom: 20px;
        }

        .invoice-box table tr.item td{
            border-bottom: 1px solid #eee;
        }

        .invoice-box table tr.item.last td {
            border-bottom: none;
        }

        .invoice-box table tr.total td:nth-child(2) {
            border-top: 2px solid #eee;
            font-weight: bold;
        }

        @media only screen and (max-width: 600px) {
            .invoice-box table tr.top table td {
                width: 100%;
                display: block;
                text-align: center;
            }

            .invoice-box table tr.information table td {
                width: 100%;
                display: block;
                text-align: center;
            }
        }

        /** RTL **/
        .rtl {
            direction: rtl;
        }

        input#datePickerCoursier {
            margin-left: 10px;
            height: 37px;

        }

        .rtl table {
            text-align: right;
        }

        .rtl table tr td:nth-child(2) {
            text-align: left;
        }
        @page {
            @bottom-center { content: element(footer) }
        }
        #tabF td {
            padding-left: 9px !important;
        }
        input#datePicker {
            height: 39px;
        }

        .notload{
            display:none;
        }
        .load{
            display:block;
        }

    </style>
    <ol class="breadcrumb">
        <li><a href="{{ path('admin_homepage') }}"><i class="fa fa-dashboard"></i> Tableau de bord</a></li>
        <li class="active">
            <a href="{{ path('_list_demande') }}">
                Demandes
            </a>
        </li>
        <li class="active">
            Liste Demande
        </li>
    </ol>
    {% for message in app.flashes('success') %}
        <br> <div class="alert alert-success">

        {{ message }}
    </div>
    {% endfor %}



    <section class="content">
        <div class="row">


            <div class="col-md-12">
                <div class="box box-primary">

                    <div class="box-header with-border">

                        <h3 class="box-title">Liste des demandes coursier</h3>
                        <div class="box-tools">
                            <a href="{{ path('_create_demande_coursier') }}" type="button" class="btn btn-success">Créer une demande coursier</a>
                        </div>
                    </div>

                    <div class="box-header with-border">

                        <table id="tabFCoursier" width="50%" class="">
                            <tr>
                                {% if is_granted('ROLE_ADMIN') == true %}


                                    <td colspan="4">
                                        <select id="mylistCoursier"  class='form-control' >
                                            <option value="all">All</option>

                                            {% for i in listeClients %}
                                                <option value="{{ i.id }}">{{ i.nom }} {{ i.prenom }}</option>

                                            {% endfor %}
                                        </select>

                                    </td>
                                {% else %}
                                    <select id="mylistCoursier"  class='form-control' style="display:none">
                                        <option value="all">All</option>
                                    </select>

                                {% endif %}
                                <td colspan="4">
                                    <input type="date"   class="form-control" name="bday" id="datePickerCoursier" >
                                </td>
                                <td colspan="4">
                                    <input type="button" class="btn btn-primary" value="Search" id="datebtnCoursier">
                                    <a type="button" href="{{ path('_list_demande') }}" class="btn btn-danger" ">reset</a>

                                </td>
                                <td>
                                    <div id="imgLCoursier">


                                    </div>
                                </td>
                            </tr>
                        </table>


                    </div>
                    <div class="box-body no-padding">

                        <!-- /.box-header -->
                        <div class="box-body no-padding" id="a5Coursier">
                            <table class="table table-condensed table-striped table-hover" id="mainTableCoursier">
                                <tbody><tr>
                                    <th>#</th>
                                    <th>Id</th>
                                    <th>Date Emission</th>
                                    <th>Quoi</th>
                                    <th>Emetteur</th>
                                    <th>Destinataire</th>
                                    <th>Lieu</th>
                                    <th>Type</th>
                                    <th>Etat</th>
                                    <th>Livreur</th>
                                    {% if is_granted('ROLE_ADMIN') == true %}


                                        <th>#Aff</th>
                                    {% endif %}

                                    <th>#Mod</th>

                                    {% if is_granted('ROLE_ADMIN') == true %}

                                        <th>#Supp</th>


                                        <th>#Arch</th>
                                    {% endif %}

                                    <th>#Telecharger</th>
                                    <th>#Imrpimer</th>

                                </tr>

                                {% if listDemandesCoursier is empty %}
                                    <tr><th style="padding:20px;" colspan="17"> Aucune demande </th></tr>
                                {% else %}
                                    {% for d in listDemandesCoursier %}
                                        <tr class="{% if d.readDemande == false %} notRead {% endif %}">
                                            <td>

                                                <input name="coffee" type="checkbox" id="{{ d.id }}" value="{{ d.id }}"/> </td>

                                            <td>{{ d.id }}</td>
                                            <td>{{ d.dateEmission | date("d/m/Y") }}</td>
                                            <td>{{ d.quoi }}</td>
                                            <td>{{ d.idClient.nom }} {{ d.idClient.prenom }}</td>
                                            <td>{{ d.nomPrenomRecept }}</td>
                                            <td>{{ d.addresseRecept }}</td>
                                            <td>{{ d.typeDC }}</td>

                                            <td>

                                                {% if (d.etat == "EnTraitement") %}
                                                    <span class="label label-info">{{ d.etat }}</span>
                                                {% elseif (d.etat == "EnCours") %}
                                                    <span class="label label-warning">{{ d.etat }}</span>
                                                {% elseif (d.etat == "Valide") %}
                                                    <span class="label label-success">{{ d.etat }}</span>
                                                {% elseif (d.etat == "Cloture") %}
                                                    <span class="label label-danger">{{ d.etat }}</span>
                                                {% else %}
                                                    {{ d.etat }}
                                                {% endif %}






                                            </td>

                                            <td>

                                                {% if d.idLivreur != null %}
                                                    {{ d.idLivreur.nom }} {{ d.idLivreur.prenom }}
                                                {% else %}
                                                    -
                                                {% endif %}


                                            </td>
                                            {% if is_granted('ROLE_ADMIN') == true %}

                                                <td>
                                                    <a href="{{ path('_assign_demande',{'id_demande':d.id}) }}">Affecter</a>
                                                </td>
                                            {% endif %}
                                            <td><a href="{{ path('_update_demande_coursier',{'id':d.id}) }}">Modifier</a></td>
                                            {% if is_granted('ROLE_ADMIN') == true %}

                                                <td><a href="{{ path('_remove_demande',{'id':d.id}) }}">Supprimer</a></td>
                                                <td><a href="{{ path('_archive_demande',{'id':d.id}) }}">Archiver</a></td>

                                            {% endif %}
                                            <td>
                                                <a href="{{ path('_generate_url', {'id_demande': d.id}) }}"> Telecharger</a>

                                            </td>
                                            <td>
                                                <a href="{{ path('view_pdf', {'id_demande': d.id}) }}"> Imrpimer</a>

                                            </td>


                                        </tr>
                                    {% endfor %}
                                {% endif %}


                                </tbody>

                            </table>
                        </div>
                        <!-- /.box-body -->






                    </div>




                </div>
            </div>

            <div class="col-md-12">

                <div class="box box-warning">

                    <div class="box-header with-border">



                        <h3 class="box-title">Liste des demandes livraison</h3>
                        <div class="box-tools">



                            <a href="{{ path('_create_demande') }}" type="button" class="btn btn-success">Créer une demande livraison</a>
                        </div>
                        {% if is_granted('ROLE_ADMIN') == true %}


                            <br>

                        {% endif %}




                        <!-- /.box-tools -->
                    </div>
                    <!-- /.box-header -->

                    <div class="box-header with-border">

                        <table id="tabF" width="50%" class="">
                            <tr>
                                {% if is_granted('ROLE_ADMIN') == true %}


                                    <td colspan="4">
                                        <select id="mylist"  class='form-control' >
                                            <option value="all">All</option>

                                            {% for i in listeClients %}
                                                <option value="{{ i.id }}">{{ i.nom }} {{ i.prenom }}</option>

                                            {% endfor %}
                                        </select>

                                    </td>
                                {% else %}
                                    <select id="mylist"  class='form-control' style="display:none">
                                        <option value="all">All</option>
                                    </select>

                                {% endif %}
                                <td colspan="4">
                                    <input type="date"   class="form-control" name="bday" id="datePicker" >

                                </td>
                                <td colspan="4">
                                    <input type="button" class="btn btn-primary" value="Search" id="datebtn">
                                    <a type="button" href="{{ path('_list_demande') }}" class="btn btn-danger" ">reset</a>

                                </td>
                                <td>
                                    <div id="imgL">


                                    </div>
                                </td>
                            </tr>
                        </table>


                    </div>
                    <div class="box-body no-padding">

                        <!-- /.box-header -->
                        <div class="box-body no-padding" id="a5">
                            <table class="table table-condensed table-striped table-hover" id="mainTable">
                                <tbody><tr>
                                    <th>#</th>
                                    <th>Id</th>
                                    <th>Date Emission</th>
                                    <th>Titre</th>
                                    <th>Type</th>
                                    <th>Emetteur</th>
                                    <th>Destinataire</th>
                                    <th>Adresse</th>
                                    <th>Tel</th>
                                    <th>Etat</th>
                                    <th>Livreur</th>
                                    {% if is_granted('ROLE_ADMIN') == true %}


                                        <th>#Aff</th>
                                    {% endif %}

                                    <th>#Mod</th>

                                    {% if is_granted('ROLE_ADMIN') == true %}

                                        <th>#Supp</th>


                                        <th>#Arch</th>
                                    {% endif %}

                                    <th>#Telecharger</th>
                                    <th>#Imrpimer</th>

                                </tr>

                                {% if listDemandes is empty %}
                                    <tr><th style="padding:20px;" colspan="17"> Aucune demande </th></tr>
                                {% else %}
                                    {% for d in listDemandes %}
                                        <tr class="{% if d.readDemande == false %} notRead {% endif %}">
                                            <td>

                                                <input name="coffee" type="checkbox" id="{{ d.id }}" value="{{ d.id }}"/> </td>

                                            <td>{{ d.id }}</td>
                                            <td>{{ d.dateEmission | date("d/m/Y") }}</td>
                                            <td>{{ d.titre }}</td>
                                            <td>{{ d.type }}</td>
                                            <td>{{ d.idClient.nom }} {{ d.idClient.prenom }}</td>
                                            <td>{{ d.nomPrenomRecept }}</td>
                                            <td>{{ d.addresseRecept }} </td>
                                            <td>{{ d.telephoneRecept }}</td>

                                            <td>

                                                {% if (d.etat == "EnTraitement") %}
                                                    <span class="label label-info">{{ d.etat }}</span>
                                                {% elseif (d.etat == "EnCours") %}
                                                    <span class="label label-warning">{{ d.etat }}</span>
                                                {% elseif (d.etat == "Valide") %}
                                                    <span class="label label-success">{{ d.etat }}</span>
                                                {% elseif (d.etat == "Cloture") %}
                                                    <span class="label label-danger">{{ d.etat }}</span>
                                                {% else %}
                                                    {{ d.etat }}
                                                {% endif %}






                                            </td>

                                            <td>

                                                {% if d.idLivreur != null %}
                                                    {{ d.idLivreur.nom }} {{ d.idLivreur.prenom }}
                                                {% else %}
                                                    -
                                                {% endif %}


                                            </td>
                                            {% if is_granted('ROLE_ADMIN') == true %}

                                                <td>
                                                    <a href="{{ path('_assign_demande',{'id_demande':d.id}) }}">Affecter</a>
                                                </td>
                                            {% endif %}
                                            <td><a href="{{ path('_update_demande',{'id':d.id}) }}">Modifier</a></td>
                                            {% if is_granted('ROLE_ADMIN') == true %}

                                                <td><a href="{{ path('_remove_demande',{'id':d.id}) }}">Supprimer</a></td>
                                                <td><a href="{{ path('_archive_demande',{'id':d.id}) }}">Archiver</a></td>

                                            {% endif %}
                                            <td>
                                                <a href="{{ path('_generate_url', {'id_demande': d.id}) }}"> Telecharger</a>

                                            </td>
                                            <td>
                                                <a href="{{ path('view_pdf', {'id_demande': d.id}) }}"> Imrpimer</a>

                                            </td>

                                        </tr>
                                    {% endfor %}
                                {% endif %}


                                </tbody>

                            </table>
                        </div>
                        <!-- /.box-body -->






                    </div>




                    <!-- /.mail-box-messages -->
                </div>
                <!-- /.box-body -->
                <button type="button"  id="btnthis" class="btn btn-primary pull-left"  data-toggle="modal" data-target="#modal-default">

                    Generate manifeste
                </button>
            </div>
            <!-- /. box -->


            {% if is_granted('ROLE_SUPER_ADMIN') == true %}

                <a href="" class=" float-right" data-toggle="modal" data-target="#modal-danger">
                    Effacer tout
                </a>
            {% endif %}


        </div>
        <!-- /.col -->
        </div>
        <!-- /.row -->
        <div class="modal fade" id="modal-default" style="display: none;">
            <div class="modal-dialog modal-manifest">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close closethis" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span></button>
                        <h4 class="modal-title">Steedex - Manifest</h4>
                    </div>
                    <div class="modal-body" id="manifest">
                        <p>Loading...</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button"  class="btn btn-default pull-left closethis" data-dismiss="modal">Close</button>
                        <button type="button" id="printthis" class="btn btn-primary">Imrpimer manifest</button>
                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>


        {% if is_granted('ROLE_SUPER_ADMIN') == true %}

            <div class="modal modal-danger fade" id="modal-danger">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span></button>
                            <h4 class="modal-title">Effacer toutes les demandes</h4>
                        </div>
                        <div class="modal-body">
                            <p>Cette action est irréversible . Vous-étes sur ? </p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline pull-left" data-dismiss="modal">Fermer</button>
                            <a class="btn btn-outline"  role="button" href="{{ path('_remove_all_demande') }}"> Effacer tout</a>

                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
        {% endif %}


    </section>





    <script type="text/javascript">

        $(document).ready(function(){
            var tmp = [];

            $("input[name='checkbox']").change(function() {
                var checked = $(this).val();
                if ($(this).is(':checked')) {
                    tmp.push(checked);
                    console.log("added");
                } else {
                    console.log("removed");

                    tmp.splice($.inArray(checked, tmp),1);
                }
            });
            console.log(tmp);




            $( "#btnthis" ).click(function() {
                var tmp= [];
                tmp = myFunction();
                $('#manifest').html("<center><img src='https://mowsalinas.org/subscribers/22sb4b327c1c/themes/default/images/wait.gif'/></center>");

                if (tmp=="" ){
                    $("#printthis").hide();

                    $("#modal-default .modal-body").html("<p><h3 style='color:red'>Vous devez selectionner au moins une demande</h3></p>");

                }

                else{
                    data = tmp;
                    //alert(abcd);
                    var $url = "{{ path('testthis', {'data': 'data'}) }}";


                    $.ajax({
                        url : '{{ path("testthis") }}',
                        data:  { "data" : tmp },
                        type:       'GET',
                        dataType:   'html',
                        async:      true,
                        success : function (response) {
                            $("#printthis").show();

                            $("#modal-default .modal-body").html(response);

                        },



                    });
                }


            });


            $("#printthis").click(function () {
                $("#manifest").printThis();

            });



        });



    </script>







    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="{{ asset('tableFilter/assets/js/bootstrap.js') }}"></script>
    <script src="{{ asset('tableFilter/assets/js/bootstrap-table.js') }}"></script>
    <script src="{{ asset('tableFilter/assets/js/bootstrap-table-en-US.js') }}"></script>
    <script src="{{ asset('comingsoon_05/vendor/select2/select2.js') }}"></script>
    <script src="{{ asset('tableFilter/assets/js/jquery-ui-1.10.3.min.js') }}"></script>
    <script src="{{ asset('tableFilter/src/bootstrap-table-filter.js') }}"></script>

    <script type="text/javascript">
        var itemPrices = [{ id: 1, text: '$1' }, { id: 2, text: '$2' }];

        $('#itemsTable').on('column-search.bs.table', function () {
            console.log('hello event');
        });
    </script>

    {% if is_granted('ROLE_ADMIN') == true %}

    <script>


        $(document).ready( function() {



            $('#datebtnCoursier').click(function(){
                $( "#imgLCoursier" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                $( "#tabCoursier" ).html("");

                var selectClientLastCoursier = $("#mylistCoursier").children("option:selected").val();
                var dateCoursier = $('#datePickerCoursier').val();


                $.ajax({
                    url : '{{ path("filterGlobalCoursier") }}',
                    data:  { "selectedClientCoursier":selectClientLastCoursier,"dateCoursier" : dateCoursier },
                    type:       'GET',
                    dataType:   'json',
                    async:      true,
                    success : function(response){

                        $( "#imgLCoursier" ).html("")
                        $( "#tabCoursier" ).show();

                        $("#a5Coursier").html(
                            "<table id='tabCoursier'  class=\"table table-striped table-hover table-condensed\">" +
                            "       <tr>\n" +
                            "            <th> # </th>\n" +
                            "            <th> Id </th>\n" +
                            "            <th> Date Emission </th>\n" +
                            "            <th> Quoi </th>\n" +
                            "            <th> Emetteur </th>\n" +
                            "            <th> Destinataire </th>\n" +
                            "            <th> Lieu </th>\n" +
                            "            <th> Type </th>\n" +
                            "            <th> Etat </th>\n" +
                            "            <th> Livreur </th>\n" +

                            "            <th> #Aff </th>\n" +
                            "            <th> #Mod </th>\n" +
                            "            <th> #Supp </th>\n" +
                            "            <th> #Telecharger </th>\n" +
                            "            <th> #Imrpimer </th>\n" +

                            "\n" +
                            "</tr>" +
                            "" +
                            "</table>"
                        );
                        $.each(response,function(k,el){
                            var confirmerOutput ;



                            var isAdmin = false;

                            var valLivreur = el.idLivreur;
                            var readD = el.readDemande;
                            var classNotRead ;
                            var res = "Non";
                            var baliseEtat  ="";
                            var resEtat = el.etat;

                            if (resEtat == "Cloture"){
                                baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                            }
                            else if (resEtat == "EnTraitement"){
                                baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                            }

                            else if (resEtat == "Valide"){

                                baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                            }

                            else if (resEtat == "EnCours"){

                                baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                            }



                            else{
                                baliseEtat = resEtat;

                            }


                            if(valLivreur==null){
                                res = "OUI";
                                var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                var confirmerOutput="<a href='#'>Confirmer</a>";

                            }else{
                                res = "NON";
                                var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                var confirmerOutput="-";

                            }

                            if(readD==false){
                                var classNotRead = "notRead";


                            }else{
                                var classNotRead = "alreadyReaded";

                            }

                            var myJSON = JSON.stringify(el.dateEmission);
                            var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                            //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                            var dateEmission = new Date(myString*1000);

                            var dd = dateEmission.getDate();

                            var mm = dateEmission.getMonth()+1;
                            var yyyy = dateEmission.getFullYear();
                            if(dd<10)
                            {
                                dd='0'+dd;
                            }

                            if(mm<10)
                            {
                                mm='0'+mm;
                            }

                            dateEmission = dd+'/'+mm+'/'+yyyy;
                            console.log(dateEmission);



                            $('#tabCoursier').append(
                                "<tr class="+classNotRead +">" +
                                "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                "<td>"+el.id+"</td>"+
                                "<td>"+dateEmission+"</td>"+
                                "<td>"+el.quoi+"</td>"+
                                "<td>"+el.id_client.nom+" "+el.id_client.prenom+"</td>"+
                                "<td>"+el.nom_prenom_recept+"</td>"+
                                "<td>"+el.addresse_recept +"</td>"+
                                "<td>"+el.typeDC+"</td>"+
                                "<td>"+baliseEtat+"</td>"+
                                "<td>"+el.id_livreur.nom+" "+el.id_livreur.prenom+"</td>"+

                                "<td> <a href='./assign/"+el.id+"'>Affecter</a></td>"+
                                "<td> <a href='./update/"+el.id+"'>Modifier</a></td>"+
                                "<td> <a href='./remove/"+el.id+"'>Supprimer</a></td>"+
                                "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                "</tr>"
                            )
                        })


                    },

                    error: function (xhr) {
                        alert("erreur STD-X201");
                    }

                })



            });












            $('input[type="date"]').change(function(){
                console.log(this.value.toString('yy-MM-dd'));
                var selectClientLast = $("#mylist").children("option:selected").val();



            });



        });





























        $(document).ready( function() {

            $('#datebtn').click(function(){
                $( "#imgL" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                $( "#tab" ).html("");

                var selectClientLast = $("#mylist").children("option:selected").val();
                var date = $('#datePicker').val();


                $.ajax({
                    url : '{{ path("filterGlobal") }}',
                    data:  { "selectedClient":selectClientLast,"date" : date },
                    type:       'GET',
                    dataType:   'json',
                    async:      true,
                    success : function(response){
                        console.log(date);
                        $( "#imgL" ).html("")
                        $( "#tab" ).show();

                        $("#a5").html(
                            "<table id='tab'  class=\"table table-striped table-hover table-condensed\">" +
                            "       <tr>\n" +
                            "            <th> # </th>\n" +
                            "            <th> Id </th>\n" +
                            "            <th> Date Emission </th>\n" +
                            "            <th> Titre </th>\n" +
                            "            <th> Type </th>\n" +
                            "            <th> Emetteur </th>\n" +
                            "            <th> Destinataire </th>\n" +
                            "            <th> Adresse </th>\n" +
                            "            <th> Tel </th>\n" +
                            "            <th> Etat </th>\n" +
                            "            <th> Livreur </th>\n" +
                            "            <th> #Aff </th>\n" +
                            "            <th> #Mod </th>\n" +
                            "            <th> #Supp </th>\n" +
                            "            <th> #Telecharger </th>\n" +
                            "            <th> #Imrpimer </th>\n" +


                            "\n" +
                            "</tr>" +
                            "" +
                            "</table>"
                        );
                        $.each(response,function(k,el){
                            var confirmerOutput ;





                            var valLivreur = el.idLivreur;
                            var readD = el.readDemande;
                            var classNotRead ;
                            var res = "Non";

                            var baliseEtat  ="";
                            var resEtat = el.etat;

                            if (resEtat == "Cloture"){
                                baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                            }
                            else if (resEtat == "EnTraitement"){
                                baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                            }

                            else if (resEtat == "Valide"){

                                baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                            }

                            else if (resEtat == "EnCours"){

                                baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                            }



                            else{
                                baliseEtat = resEtat;

                            }


                            if(valLivreur==null){
                                res = "OUI";
                                var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                var confirmerOutput="<a href='#'>Confirmer</a>";

                            }else{
                                res = "NON";
                                var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                var confirmerOutput="-";

                            }

                            if(readD==false){
                                var classNotRead = "notRead";


                            }else{
                                var classNotRead = "alreadyReaded";

                            }
                            var myJSON = JSON.stringify(el.dateEmission);
                            var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                            //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                            var dateEmission = new Date(myString*1000);

                            var dd = dateEmission.getDate();

                            var mm = dateEmission.getMonth()+1;
                            var yyyy = dateEmission.getFullYear();
                            if(dd<10)
                            {
                                dd='0'+dd;
                            }

                            if(mm<10)
                            {
                                mm='0'+mm;
                            }

                            dateEmission = dd+'/'+mm+'/'+yyyy;
                            console.log(dateEmission);

                            $('#tab').append(
                                "<tr class="+classNotRead +">" +
                                "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                "<td>"+el.id+"</td>"+
                                "<td>"+dateEmission+"</td>"+
                                "<td>"+el.titre+"</td>"+
                                "<td>"+el.type+"</td>"+
                                "<td>"+el.idClient.nom+" "+el.idClient.prenom+"</td>"+
                                "<td>"+el.nomPrenomRecept+"</td>"+
                                "<td>"+el.addresseRecept+"</td>"+
                                "<td>"+el.telephoneRecept+"</td>"+
                                "<td>"+baliseEtat+"</td>"+
                                "<td>"+valLivreur+"</td>"+

                                "<td> <a href='./assign/"+el.id+"'>Affecter</a></td>"+
                                "<td> <a href='./update/"+el.id+"'>Modifier</a></td>"+
                                "<td> <a href='./remove/"+el.id+"'>Supprimer</a></td>"+
                                "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                "</tr>"
                            )
                        })


                    },

                    error: function (xhr) {
                        alert("erreur STD-X202");
                    }

                })



            });













            $('input[type="date"]').change(function(){
                console.log(this.value.toString('yy-MM-dd'));
                var selectClientLast = $("#mylist").children("option:selected").val();



            });



        });
        function testClicked()
        {
            $('.getDate').html($('#datePicker').val());
        }


    </script>


    {% elseif is_granted('ROLE_CLIENT') == true %}

        <script>


            $(document).ready( function() {




                $('#datebtnCoursier').click(function(){
                    $( "#imgLCoursier" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                    $( "#tabCoursier" ).html("");

                    var selectClientLastCoursier = $("#mylistCoursier").children("option:selected").val();
                    var dateCoursier = $('#datePickerCoursier').val();

                    $.ajax({
                        url : '{{ path("filterGlobalCoursier") }}',
                        data:  { "selectedClientCoursier":selectClientLastCoursier,"dateCoursier" : dateCoursier },
                        type:       'GET',
                        dataType:   'json',
                        async:      true,
                        success : function(response){

                            $( "#imgLCoursier" ).html("")
                            $( "#tabCoursier" ).show();

                            $("#a5Coursier").html(
                                "<table id='tabCoursier'  class=\"table table-striped table-hover table-condensed\">" +
                                "       <tr>\n" +
                                "            <th> # </th>\n" +
                                "            <th> Id </th>\n" +
                                "            <th> Date Emission </th>\n" +
                                "            <th> Quoi </th>\n" +
                                "            <th> Emetteur </th>\n" +
                                "            <th> Destinataire </th>\n" +
                                "            <th> Lieu </th>\n" +
                                "            <th> Type </th>\n" +
                                "            <th> Etat </th>\n" +
                                "            <th> Livreur </th>\n" +

                                "            <th> #Mod </th>\n" +
                                "            <th> #Telecharger  </th>\n" +
                                "            <th> #Imrpimer </th>\n" +

                                "\n" +
                                "</tr>" +
                                "" +
                                "</table>"
                            );
                            $.each(response,function(k,el){
                                var confirmerOutput ;



                                var isAdmin = false;

                                var valLivreur = el.idLivreur;
                                var readD = el.readDemande;
                                var classNotRead ;
                                var res = "Non";

                                var baliseEtat  ="";
                                var resEtat = el.etat;

                                if (resEtat == "Cloture"){
                                    baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                                }
                                else if (resEtat == "EnTraitement"){
                                    baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                                }

                                else if (resEtat == "Valide"){

                                    baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                                }

                                else if (resEtat == "EnCours"){

                                    baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                                }



                                else{
                                    baliseEtat = resEtat;

                                }



                                if(valLivreur==null){
                                    res = "OUI";
                                    var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                    var confirmerOutput="<a href='#'>Confirmer</a>";

                                }else{
                                    res = "NON";
                                    var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                    var confirmerOutput="-";

                                }

                                if(readD==false){
                                    var classNotRead = "notRead";


                                }else{
                                    var classNotRead = "alreadyReaded";

                                }

                                var myJSON = JSON.stringify(el.dateEmission);
                                var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                                //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                                var dateEmission = new Date(myString*1000);

                                var dd = dateEmission.getDate();

                                var mm = dateEmission.getMonth()+1;
                                var yyyy = dateEmission.getFullYear();
                                if(dd<10)
                                {
                                    dd='0'+dd;
                                }

                                if(mm<10)
                                {
                                    mm='0'+mm;
                                }

                                dateEmission = dd+'/'+mm+'/'+yyyy;
                                console.log(dateEmission);



                                $('#tabCoursier').append(
                                    "<tr class="+classNotRead +">" +
                                    "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                    "<td>"+el.id+"</td>"+
                                    "<td>"+dateEmission+"</td>"+
                                    "<td>"+el.quoi+"</td>"+
                                    "<td>"+el.id_client.nom+" "+el.id_client.prenom+"</td>"+
                                    "<td>"+el.nom_prenom_recept+"</td>"+
                                    "<td>"+el.addresse_recept +"</td>"+
                                    "<td>"+el.typeDC+"</td>"+
                                    "<td>"+baliseEtat+"</td>"+
                                    "<td>"+el.id_livreur.nom+" "+el.id_livreur.prenom+"</td>"+

                                    "<td> <a href='./update-demande-coursier/"+el.id+"'>Modifier</a></td>"+
                                    "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                    "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                    "</tr>"
                                )
                            })


                        },

                        error: function (xhr) {
                            alert("erreur STD-X203");
                        }

                    })



                });












                $('input[type="date"]').change(function(){
                    console.log(this.value.toString('yy-MM-dd'));
                    var selectClientLast = $("#mylist").children("option:selected").val();



                });



            });





























            $(document).ready( function() {

                $('#datebtn').click(function(){
                    $( "#imgL" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                    $( "#tab" ).html("");

                    var selectClientLast = $("#mylist").children("option:selected").val();
                    var date = $('#datePicker').val();


                    $.ajax({
                        url : '{{ path("filterGlobal") }}',
                        data:  { "selectedClient":selectClientLast,"date" : date },
                        type:       'GET',
                        dataType:   'json',
                        async:      true,
                        success : function(response){
                            console.log(date);
                            $( "#imgL" ).html("")
                            $( "#tab" ).show();

                            $("#a5").html(
                                "<table id='tab'  class=\"table table-striped table-hover table-condensed\">" +
                                "       <tr>\n" +
                                "            <th> # </th>\n" +
                                "            <th> Id </th>\n" +
                                "            <th> Date Emission </th>\n" +
                                "            <th> Titre </th>\n" +
                                "            <th> Type </th>\n" +
                                "            <th> Emetteur </th>\n" +
                                "            <th> Destinataire </th>\n" +
                                "            <th> Adresse </th>\n" +
                                "            <th> Tel </th>\n" +
                                "            <th> Etat </th>\n" +
                                "            <th> Livreur </th>\n" +
                                "            <th> #Mod </th>\n" +
                                "            <th> #Telecharger </th>\n" +
                                "            <th> #Imrpimer </th>\n" +


                                "\n" +
                                "</tr>" +
                                "" +
                                "</table>"
                            );
                            $.each(response,function(k,el){
                                var confirmerOutput ;





                                var valLivreur = el.idLivreur;
                                var readD = el.readDemande;
                                var classNotRead ;
                                var res = "Non";
                                var baliseEtat  ="";
                                var resEtat = el.etat;

                                if (resEtat == "Cloture"){
                                    baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                                }
                                else if (resEtat == "EnTraitement"){
                                    baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                                }

                                else if (resEtat == "Valide"){

                                    baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                                }

                                else if (resEtat == "EnCours"){

                                    baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                                }



                                else{
                                    baliseEtat = resEtat;

                                }


                                if(valLivreur==null){
                                    res = "OUI";
                                    var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                    var confirmerOutput="<a href='#'>Confirmer</a>";

                                }else{
                                    res = "NON";
                                    var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                    var confirmerOutput="-";

                                }

                                if(readD==false){
                                    var classNotRead = "notRead";


                                }else{
                                    var classNotRead = "alreadyReaded";

                                }
                                var myJSON = JSON.stringify(el.dateEmission);
                                var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                                //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                                var dateEmission = new Date(myString*1000);

                                var dd = dateEmission.getDate();

                                var mm = dateEmission.getMonth()+1;
                                var yyyy = dateEmission.getFullYear();
                                if(dd<10)
                                {
                                    dd='0'+dd;
                                }

                                if(mm<10)
                                {
                                    mm='0'+mm;
                                }

                                dateEmission = dd+'/'+mm+'/'+yyyy;
                                console.log(dateEmission);

                                $('#tab').append(
                                    "<tr class="+classNotRead +">" +
                                    "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                    "<td>"+el.id+"</td>"+
                                    "<td>"+dateEmission+"</td>"+
                                    "<td>"+el.titre+"</td>"+
                                    "<td>"+el.type+"</td>"+
                                    "<td>"+el.idClient.nom+" "+el.idClient.prenom+"</td>"+
                                    "<td>"+el.nomPrenomRecept+"</td>"+
                                    "<td>"+el.addresseRecept+"</td>"+
                                    "<td>"+el.telephoneRecept+"</td>"+
                                    "<td>"+baliseEtat+"</td>"+
                                    "<td>"+valLivreur+"</td>"+

                                    "<td> <a href='./update/"+el.id+"'>Modifier</a></td>"+
                                    "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                    "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                    "</tr>"
                                )
                            })


                        },

                        error: function (xhr) {
                            alert("erreur STD-X204");
                        }

                    })



                });













                $('input[type="date"]').change(function(){
                    console.log(this.value.toString('yy-MM-dd'));
                    var selectClientLast = $("#mylist").children("option:selected").val();



                });



            });
            function testClicked()
            {
                $('.getDate').html($('#datePicker').val());
            }


        </script>
    {% elseif is_granted('ROLE_LIVREUR') == true %}

        <script>


            $(document).ready( function() {



                $('#datebtnCoursier').click(function(){
                    $( "#imgLCoursier" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                    $( "#tabCoursier" ).html("");

                    var selectClientLastCoursier = $("#mylistCoursier").children("option:selected").val();
                    var dateCoursier = $('#datePickerCoursier').val();

                    $.ajax({
                        url : '{{ path("filterGlobalCoursier") }}',
                        data:  { "selectedClientCoursier":selectClientLastCoursier,"dateCoursier" : dateCoursier },
                        type:       'GET',
                        dataType:   'json',
                        async:      true,
                        success : function(response){

                            $( "#imgLCoursier" ).html("")
                            $( "#tabCoursier" ).show();

                            $("#a5Coursier").html(
                                "<table id='tabCoursier'  class=\"table table-striped table-hover table-condensed\">" +
                                "       <tr>\n" +
                                "            <th> # </th>\n" +
                                "            <th> Id </th>\n" +
                                "            <th> Date Emission </th>\n" +
                                "            <th> Quoi </th>\n" +
                                "            <th> Emetteur </th>\n" +
                                "            <th> Destinataire </th>\n" +
                                "            <th> Lieu </th>\n" +
                                "            <th> Type </th>\n" +
                                "            <th> Etat </th>\n" +
                                "            <th> Livreur </th>\n" +

                                "            <th> #Mod </th>\n" +
                                "            <th> #Telecharger </th>\n" +
                                "            <th> #Imrpimer </th>\n" +

                                "\n" +
                                "</tr>" +
                                "" +
                                "</table>"
                            );
                            $.each(response,function(k,el){
                                var confirmerOutput ;



                                var isAdmin = false;

                                var valLivreur = el.idLivreur;
                                var readD = el.readDemande;
                                var classNotRead ;
                                var res = "Non";
                                var baliseEtat  ="";
                                var resEtat = el.etat;

                                if (resEtat == "Cloture"){
                                    baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                                }
                                else if (resEtat == "EnTraitement"){
                                    baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                                }

                                else if (resEtat == "Valide"){

                                    baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                                }

                                else if (resEtat == "EnCours"){

                                    baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                                }



                                else{
                                    baliseEtat = resEtat;

                                }

                                if(valLivreur==null){
                                    res = "OUI";
                                    var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                    var confirmerOutput="<a href='#'>Confirmer</a>";

                                }else{
                                    res = "NON";
                                    var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                    var confirmerOutput="-";

                                }

                                if(readD==false){
                                    var classNotRead = "notRead";


                                }else{
                                    var classNotRead = "alreadyReaded";

                                }

                                var myJSON = JSON.stringify(el.dateEmission);
                                var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                                //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                                var dateEmission = new Date(myString*1000);

                                var dd = dateEmission.getDate();

                                var mm = dateEmission.getMonth()+1;
                                var yyyy = dateEmission.getFullYear();
                                if(dd<10)
                                {
                                    dd='0'+dd;
                                }

                                if(mm<10)
                                {
                                    mm='0'+mm;
                                }

                                dateEmission = dd+'/'+mm+'/'+yyyy;
                                console.log(dateEmission);



                                $('#tabCoursier').append(
                                    "<tr class="+classNotRead +">" +
                                    "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                    "<td>"+el.id+"</td>"+
                                    "<td>"+dateEmission+"</td>"+
                                    "<td>"+el.quoi+"</td>"+
                                    "<td>"+el.id_client.nom+" "+el.id_client.prenom+"</td>"+
                                    "<td>"+el.nom_prenom_recept+"</td>"+
                                    "<td>"+el.addresse_recept +"</td>"+
                                    "<td>"+el.typeDC+"</td>"+
                                    "<td>"+baliseEtat+"</td>"+
                                    "<td>"+el.id_livreur.nom+" "+el.id_livreur.prenom+"</td>"+

                                    "<td> <a href='./update-demande-coursier/"+el.id+"'>Modifier</a></td>"+
                                    "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                    "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                    "</tr>"
                                )
                            })


                        },
                        error: function (xhr) {
                            alert("erreur STD-X205");
                        }


                    })



                });












                $('input[type="date"]').change(function(){
                    console.log(this.value.toString('yy-MM-dd'));
                    var selectClientLast = $("#mylist").children("option:selected").val();



                });



            });





























            $(document).ready( function() {

                $('#datebtn').click(function(){
                    $( "#imgL" ).append(" <img  src='https://www.wpfaster.org/wp-content/uploads/2013/06/circle-loading-gif.gif' width='50px'/>")
                    $( "#tab" ).html("");

                    var selectClientLast = $("#mylist").children("option:selected").val();
                    var date = $('#datePicker').val();


                    $.ajax({
                        url : '{{ path("filterGlobal") }}',
                        data:  { "selectedClient":selectClientLast,"date" : date },
                        type:       'GET',
                        dataType:   'json',
                        async:      true,
                        success : function(response){
                            console.log(date);
                            $( "#imgL" ).html("")
                            $( "#tab" ).show();

                            $("#a5").html(
                                "<table id='tab'  class=\"table table-striped table-hover table-condensed\">" +
                                "       <tr>\n" +
                                "            <th> # </th>\n" +
                                "            <th> Id </th>\n" +
                                "            <th> Date Emission </th>\n" +
                                "            <th> Titre </th>\n" +
                                "            <th> Type </th>\n" +
                                "            <th> Emetteur </th>\n" +
                                "            <th> Destinataire </th>\n" +
                                "            <th> Adresse </th>\n" +
                                "            <th> Tel </th>\n" +
                                "            <th> Etat </th>\n" +
                                "            <th> Livreur </th>\n" +
                                "            <th> #Mod </th>\n" +
                                "            <th> #Telecharger </th>\n" +
                                "            <th> #Imrpimer </th>\n" +


                                "\n" +
                                "</tr>" +
                                "" +
                                "</table>"
                            );
                            $.each(response,function(k,el){
                                var confirmerOutput ;





                                var valLivreur = el.idLivreur;
                                var readD = el.readDemande;
                                var classNotRead ;
                                var res = "Non";

                                var baliseEtat  ="";
                                var resEtat = el.etat;

                                if (resEtat == "Cloture"){
                                    baliseEtat = "<span class=\"label label-danger\">"+resEtat+"</span>";
                                }
                                else if (resEtat == "EnTraitement"){
                                    baliseEtat = "<span class=\"label label-info\">"+resEtat+"</span>";


                                }

                                else if (resEtat == "Valide"){

                                    baliseEtat = "<span class=\"label label-success\">"+resEtat+"</span>";

                                }

                                else if (resEtat == "EnCours"){

                                    baliseEtat = "<span class=\"label label-warning\">"+resEtat+"</span>";

                                }



                                else{
                                    baliseEtat = resEtat;

                                }



                                if(valLivreur==null){
                                    res = "OUI";
                                    var valLivreur = "<img src='https://image.flaticon.com/icons/png/512/291/291202.png' width='20px'>";
                                    var confirmerOutput="<a href='#'>Confirmer</a>";

                                }else{
                                    res = "NON";
                                    var valLivreur = el.idLivreur.nom + " " + el.idLivreur.prenom;
                                    var confirmerOutput="-";

                                }

                                if(readD==false){
                                    var classNotRead = "notRead";


                                }else{
                                    var classNotRead = "alreadyReaded";

                                }
                                var myJSON = JSON.stringify(el.dateEmission);
                                var myString = myJSON.substr(myJSON.indexOf("timestamp")+11,10)
                                //var thenum = myString.replace( /^\D+/g, ''); // replace all leading non-digits with nothing

                                var dateEmission = new Date(myString*1000);

                                var dd = dateEmission.getDate();

                                var mm = dateEmission.getMonth()+1;
                                var yyyy = dateEmission.getFullYear();
                                if(dd<10)
                                {
                                    dd='0'+dd;
                                }

                                if(mm<10)
                                {
                                    mm='0'+mm;
                                }

                                dateEmission = dd+'/'+mm+'/'+yyyy;
                                console.log(dateEmission);

                                $('#tab').append(
                                    "<tr class="+classNotRead +">" +
                                    "<td><input  id='"+el.id+"' name='coffee'  name='checkbox' type='checkbox' id='"+el.id+"' value='"+el.id+"'/></td>"+
                                    "<td>"+el.id+"</td>"+
                                    "<td>"+dateEmission+"</td>"+
                                    "<td>"+el.titre+"</td>"+
                                    "<td>"+el.type+"</td>"+
                                    "<td>"+el.idClient.nom+" "+el.idClient.prenom+"</td>"+
                                    "<td>"+el.nomPrenomRecept+"</td>"+
                                    "<td>"+el.addresseRecept+"</td>"+
                                    "<td>"+el.telephoneRecept+"</td>"+
                                    "<td>"+baliseEtat+"</td>"+
                                    "<td>"+valLivreur+"</td>"+

                                    "<td> <a href='./update/"+el.id+"'>Modifier</a></td>"+
                                    "<td> <a href='./pdf/"+el.id+"'>Telecharger</a></td>"+
                                    "<td> <a href='./view/"+el.id+"'>Imprimer</a></td>"+



                                    "</tr>"
                                )
                            })


                        },

                        error: function (xhr) {
                            alert("erreur STD-X206");
                        }

                    })



                });













                $('input[type="date"]').change(function(){
                    console.log(this.value.toString('yy-MM-dd'));
                    var selectClientLast = $("#mylist").children("option:selected").val();



                });



            });
            function testClicked()
            {
                $('.getDate').html($('#datePicker').val());
            }


        </script>

        {% else %}
        <script>
            console.log('else here');
        </script>
    {% endif %}

    <script>



        function myFunction() {

            var tmp = [];

            var coffee = document.getElementsByName('coffee');
            var i;
            /* for (i = 0; i < coffee.length; i++) {
                 if (coffee[i].checked) {
                     tmp.push(coffee[i].value);
                 }
                 else{
                     tmp.splice($.inArray(coffee[i].value, tmp),1);


                 }
             }*/

            // returns array of checked checkboxes with 'name' in 'form_id'

            inputs = document.getElementsByName("coffee"),
                arr = [];

            for (var i = 0, max = inputs.length; i < max; i += 1) {
                // Take only those inputs which are checkbox
                if (inputs[i].type === "checkbox" && inputs[i].checked) {
                    arr.push(inputs[i].value);
                    console.log("added"+arr);

                }
            }


            return arr;

        }
    </script>


{% endblock %}